<% content_for :javascript do %>
  <%= javascript_include_tag 'jquery.flot.min.js',
                             'jquery.flot.selection.min.js',
                             'jquery.flot.axislabels.js',
                             'jquery.multirowcheckboxmenu',
                             'controllers/transformer_informations.js'
  %>
                           
  
<% end %>

<% form_for :station do |f| -%>
<div class="grid_3">
  <%= f.label(:station, "เขต")%>
</div>
<div class="grid_3">
  <%= 
      @stations = Station.find(:all, :group => "region")
      f.collection_select(:station, @stations, :region, :region, 
                          {:prompt => true, :selected => params[:region]})
  %>
</div>
<div class="clear"></div> 
<div id="transformer_name_label" class="grid_3">
  <label for="station_transformer_name">ชื่อหม้อแปลงไฟฟ้า</labe>
</div>
<div id="transformer_name_select" class="grid_3">
  <select id="station_transformer_name" name="station[transformer_name]"></select>
</div>
<script id="transformer_names" type="text/x-jquery-tmpl">
  <option value=${$data["transformer"]["id"]}> ${$data["transformer"]["transformer_name"]} </option>
</script>
<% end -%>
<div class="clear"></div> 
<div class="grid_16">
<div id="placeholder" style="width:600px;height:400px"></div>
</div>
<div class="clear"></div> 
<br/>
<div id="transformers" class="grid_16">
  <table id="transformers_table">
    <thead>
      <tr>
      <th>Id</th>
      <th>Device No.</th>
      <th>Equipment No.</th>
      <th>Overall Condition(%)</th>
      <th>Importance Index System(%)</th>
      <th>Risk</th>
      <th>Action</th>
      <th> <input type="checkbox" name="name[]" id="select_all"/></th>
      </tr>
    </thead>
    <tbody>
      <% if !@transformer_informations.blank? %>
        <% for transformer_information in @transformer_informations %>
          <tr>
            <td><%= transformer_information.transformer.id %></td>
            <td><%= transformer_information.transformer.transformer_name %></td>
            <td><%= transformer_information.transformer.egatsn %></td>
            <td><%= transformer_information.percent_hi %></td>
            <td><%= transformer_information.importance_index %></td>
            <td><%= transformer_information.risk.risk %></td>
            <td><%= transformer_information.risk.action %></td>
            <td>
              <input type="checkbox" name="name[]" 
                    id = "<%= 'transformer_' + transformer_information.transformer.id.to_s -%>"
                    class="transformer_checkbox"/>
            </td>
          </tr>
        <% end %>
      <% else %>
        No transformer was found.
      <% end %>      
    </tbody>
  </table>
</div>
</div>

</div>
